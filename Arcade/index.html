<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Arcade Home Screen</title>
    <!-- Importing a retro 8-bit font from Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-color: #050505;
            --text-color: #ffffff;
            --highlight-color: #ff00ff; /* Neon Pink/Magenta for selection */
            --accent-color: #00ffff; /* Cyan for titles */
        }

        body, html {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            background-color: var(--bg-color);
            color: var(--text-color);
            font-family: 'Press Start 2P', cursive;
            overflow: hidden; /* Prevent scrolling */
            user-select: none;
        }

        /* --- CRT & Scanline Effects --- */
        .scanlines {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: linear-gradient(
                to bottom,
                rgba(255,255,255,0),
                rgba(255,255,255,0) 50%,
                rgba(0,0,0,0.2) 50%,
                rgba(0,0,0,0.2)
            );
            background-size: 100% 4px;
            pointer-events: none; /* Let clicks pass through to the buttons */
            z-index: 50;
        }

        .crt-flicker {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: rgba(18, 16, 16, 0.1);
            opacity: 0;
            pointer-events: none;
            z-index: 49;
            animation: flicker 0.15s infinite;
        }

        @keyframes flicker {
            0% { opacity: 0.02; }
            50% { opacity: 0.05; }
            100% { opacity: 0.02; }
        }

        /* --- Menu Layout --- */
        #menu-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            z-index: 10;
            transition: opacity 0.5s ease;
        }

        h1 {
            color: var(--accent-color);
            font-size: 3rem;
            margin-bottom: 2rem;
            text-shadow: 3px 3px 0px #000, 5px 5px 0px rgba(0, 255, 255, 0.4);
            letter-spacing: 4px;
        }

        .subtitle {
            font-size: 1rem;
            color: #aaaaaa;
            margin-bottom: 4rem;
            animation: blink 1.5s infinite;
        }

        @keyframes blink {
            0%, 49% { opacity: 1; }
            50%, 100% { opacity: 0; }
        }

        ul {
            list-style-type: none;
            padding: 0;
            margin: 0;
        }

        li {
            font-size: 2rem;
            margin: 2rem 0;
            color: #555555; /* Dimmed when not selected */
            transition: all 0.1s;
            position: relative;
        }

        /* The active/selected game styling */
        li.selected {
            color: var(--highlight-color);
            text-shadow: 0 0 10px var(--highlight-color);
            transform: scale(1.1);
        }

        li.selected::before {
            content: "► ";
            position: absolute;
            left: -3rem;
        }

        li.selected::after {
            content: " ◄";
            position: absolute;
            right: -3rem;
        }

        .controls-hint {
            position: absolute;
            bottom: 2rem;
            font-size: 0.8rem;
            color: #777;
            line-height: 1.5;
        }

        /* --- Game Container (iframe) --- */
        #game-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: none; /* Hidden until a game is launched */
            z-index: 20;
            background-color: #000;
        }

        iframe {
            width: 100%;
            height: 100%;
            border: none;
        }

        /* Small overlay button to exit back to menu */
        #exit-hint {
            position: absolute;
            top: 10px;
            right: 10px;
            background: rgba(0, 0, 0, 0.7);
            color: #fff;
            padding: 10px;
            font-size: 0.7rem;
            border: 2px solid #555;
            z-index: 30;
            pointer-events: none; /* Let game handle clicks, this is just visual */
            opacity: 0.5;
            transition: opacity 0.3s;
        }
        
        #game-container:hover #exit-hint {
            opacity: 1;
        }

        /* --- Loading Transition --- */
        #loading-screen {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: #000;
            color: #fff;
            display: none;
            justify-content: center;
            align-items: center;
            font-size: 2rem;
            z-index: 40;
        }
    </style>
</head>
<body>

    <!-- CRT Visual Effects -->
    <div class="scanlines"></div>
    <div class="crt-flicker"></div>

    <!-- Main Arcade Menu -->
    <div id="menu-container">
        <h1>ARCADE CLASSICS</h1>
        <div class="subtitle">INSERT COIN TO PLAY</div>

        <ul id="game-list">
            <!-- IMPORTANT: Change the data-src to the actual file names of your HTML games -->
            <li class="game-item selected" data-src="Pacman.html">PAC-MAN</li>
            <li class="game-item" data-src="Galaga.html">GALAGA</li>
            <li class="game-item" data-src="Centipede.html">CENTIPEDE</li>
        </ul>

        <div class="controls-hint">
            [UP/DOWN] NAVIGATE <br><br>
            [ENTER] START GAME <br><br>
            [ESC] EXIT GAME
        </div>
    </div>

    <!-- Transition Screen -->
    <div id="loading-screen">
        PLAYER 1 GET READY...
    </div>

    <!-- The Game Frame (Where your HTML games load) -->
    <div id="game-container">
        <div id="exit-hint">PRESS ESC TO QUIT</div>
        <iframe id="game-frame" src=""></iframe>
    </div>

    <script>
        const menuContainer = document.getElementById('menu-container');
        const gameContainer = document.getElementById('game-container');
        const gameFrame = document.getElementById('game-frame');
        const loadingScreen = document.getElementById('loading-screen');
        const gameItems = document.querySelectorAll('.game-item');
        
        let selectedIndex = 0;
        let isGameRunning = false;

        // Function to update the visual selection in the menu
        function updateSelection() {
            gameItems.forEach((item, index) => {
                if (index === selectedIndex) {
                    item.classList.add('selected');
                } else {
                    item.classList.remove('selected');
                }
            });
        }

        // Function to launch the selected game
        function launchGame() {
            if (isGameRunning) return;
            
            isGameRunning = true;
            const selectedGame = gameItems[selectedIndex];
            const gameFileUrl = selectedGame.getAttribute('data-src');

            // 1. Hide Menu
            menuContainer.style.display = 'none';
            
            // 2. Show Loading Screen briefly for that classic arcade feel
            loadingScreen.style.display = 'flex';
            
            // Play a theoretical coin/start sound here if you have one
            // new Audio('start_sound.mp3').play();

            setTimeout(() => {
                loadingScreen.style.display = 'none';
                gameContainer.style.display = 'block';
                
                // 3. Load the game HTML file into the iframe
                // Note: If testing locally without a server, browsers might block iframe loading 
                // due to CORS policies. It's best to run this through a local server (like VSCode Live Server).
                gameFrame.src = gameFileUrl;
                
                // Give iframe focus so keyboard controls immediately work for the game
                gameFrame.focus();
            }, 1500); // 1.5 second loading delay
        }

        // Function to exit the game and return to menu
        function exitGame() {
            if (!isGameRunning) return;

            isGameRunning = false;
            
            // Clear the iframe so the game stops running in the background
            gameFrame.src = ""; 
            
            // Switch views back to the menu
            gameContainer.style.display = 'none';
            menuContainer.style.display = 'flex';
        }

        // --- Keyboard Controls ---
        window.addEventListener('keydown', (e) => {
            
            if (!isGameRunning) {
                // Menu Controls
                if (e.key === 'ArrowUp' || e.key === 'w' || e.key === 'W') {
                    selectedIndex = (selectedIndex - 1 + gameItems.length) % gameItems.length;
                    updateSelection();
                    // Play a menu blip sound here
                } 
                else if (e.key === 'ArrowDown' || e.key === 's' || e.key === 'S') {
                    selectedIndex = (selectedIndex + 1) % gameItems.length;
                    updateSelection();
                    // Play a menu blip sound here
                } 
                else if (e.key === 'Enter' || e.key === ' ') {
                    launchGame();
                }
            } else {
                // Game Controls (Listening for the Escape key to quit)
                if (e.key === 'Escape') {
                    exitGame();
                }
            }
        });

        // We also need to listen for messages from the iframe just in case the iframe 
        // captures the "Escape" keydown event and doesn't bubble it up to the parent window.
        // You can add this tiny script to your individual game HTML files to ensure ESC works:
        // window.addEventListener('keydown', (e) => { if(e.key === 'Escape') window.parent.postMessage('exitGame', '*'); });
        
        window.addEventListener('message', (event) => {
            if (event.data === 'exitGame') {
                exitGame();
            }
        });

        // Initialize first selection
        updateSelection();
    </script>
</body>
</html>
